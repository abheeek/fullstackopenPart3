(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,n,t){e.exports=t(40)},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(17),o=t.n(c),u=t(4),l=t(7),i=t(2),m=t(5),d=t.n(m),s=function(){return d.a.get("/api/persons").then((function(e){return e.data}))},f=function(e){return d.a.post("/api/persons",e).then((function(e){return e.data}))},h=function(e){return d.a.delete("/api/persons/".concat(e.id))},b=function(e,n){return d.a.put("/api/persons/".concat(e.id),Object(u.a)(Object(u.a)({},e),{},{number:n})).then((function(e){return e.data}))},p=function(e){return r.a.createElement("form",{onSubmit:e.addNewPerson},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},g=function(e){var n=e.person,t=e.handleDeleteClick;return r.a.createElement("li",null,n.name," ",n.number,r.a.createElement("button",{onClick:function(){return t(n)}},"delete"))},E=function(e){var n=e.persons,t=e.handleDeleteClick;return r.a.createElement("ul",null,n.map((function(e){return r.a.createElement(g,{key:e.name,person:e,handleDeleteClick:t})})))},v=function(e){return r.a.createElement("div",null,"Search: ",r.a.createElement("input",{value:e.searchName,onChange:e.handleSearchChange}))},O=function(e){var n=e.message,t={color:e.messageType,background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return n?r.a.createElement("div",{style:t},n):null},j=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),m=Object(i.a)(o,2),d=m[0],g=m[1],j=Object(a.useState)(""),w=Object(i.a)(j,2),C=w[0],k=w[1],N=Object(a.useState)(""),S=Object(i.a)(N,2),y=S[0],D=S[1],T=Object(a.useState)(""),x=Object(i.a)(T,2),I=x[0],P=x[1],B=Object(a.useState)(""),J=Object(i.a)(B,2),L=J[0],z=J[1];Object(a.useEffect)((function(){s().then((function(e){c(e)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(O,{message:I,messageType:L}),r.a.createElement(v,{searchName:y,handleSearchChange:function(e){D(e.target.value)}}),r.a.createElement("h2",null,"add a new"),r.a.createElement(p,{addNewPerson:function(e){e.preventDefault();var n=t.findIndex((function(e){return e.name===d}));n>-1?window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))&&b(t[n],C).then((function(e){var a=Object(l.a)(t);a[n]=Object(u.a)({},e),c(a),P("Updated ".concat(d)),z("green"),setTimeout((function(){P(null)}),3e3)})).catch((function(e){P("Information of ".concat(d," has already been removed from server")),z("red"),setTimeout((function(){P(null)}),3e3)})):f({name:d,number:C}).then((function(e){c(t.concat(e)),P("Added ".concat(d)),z("green"),setTimeout((function(){P(null)}),3e3)})).catch((function(e){console.log(e.response.data),P(e.response.data.error),z("red"),setTimeout((function(){P(null)}),3e3)}));g(""),k("")},newName:d,handleNameChange:function(e){g(e.target.value)},newNumber:C,handleNumberChange:function(e){k(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(E,{persons:t.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())})),handleDeleteClick:function(e){window.confirm("Delete ".concat(e.name,"?"))&&h(e).then((function(){c(function(e,n){var t=e.indexOf(n);return t>-1&&e.splice(t,1),e}(Object(l.a)(t),e))}))}}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.f5527809.chunk.js.map